<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Docs</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container my-4">
    <h1 class="mb-4">Documentación de API</h1>
    
    <div class="accordion" id="apiDocs">
        <!-- Sección de Autenticación y Usuarios -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#auth">
                    1. Autenticación y Usuarios
                </button>
            </h2>
            <div id="auth" class="accordion-collapse collapse show" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <!-- Endpoint de Login -->
                    <span class="badge bg-primary">Login</span>
                    <p><strong>POST</strong> /api/auth/login</p>
                    <p><strong>Parámetros:</strong> username (string, requerido), password (string, requerido)</p>
                    <p>Inicia sesión y devuelve un token de autenticación.</p>
                    
                    <!-- Endpoint para obtener información del usuario autenticado -->
                    <span class="badge bg-secondary">Obtener información del usuario autenticado</span>
                    <p><strong>GET</strong> /api/auth/me</p>
                    <p><strong>Parámetros:</strong> Token en el header (Authorization: Bearer &lt;token&gt;)</p>
                    <p>Retorna los datos del usuario autenticado.</p>
                    
                    <!-- Endpoint para cerrar sesión -->
                    <span class="badge bg-danger">Cerrar sesión</span>
                    <p><strong>POST</strong> /api/auth/logout</p>
                    <p><strong>Parámetros:</strong> Token en el header</p>
                    <p>Invalida el token de sesión.</p>
                </div>
            </div>
        </div>

        <!-- Sección de Usuarios -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#users">
                    2. Usuarios
                </button>
            </h2>
            <div id="users" class="accordion-collapse collapse" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <!-- Obtener lista de usuarios -->
                    <span class="badge bg-info">Obtener lista de usuarios</span>
                    <p><strong>GET</strong> /api/users</p>
                    <p><strong>Parámetros opcionales:</strong> role (int, opcional)</p>
                    <p>Devuelve todos los usuarios.</p>
                    
                    <!-- Obtener usuario por ID -->
                    <span class="badge bg-warning">Obtener usuario por ID</span>
                    <p><strong>GET</strong> /api/users/{id}</p>
                    <p>Obtiene los detalles de un usuario específico.</p>
                    
                    <!-- Crear un usuario -->
                    <span class="badge bg-success">Crear un usuario</span>
                    <p><strong>POST</strong> /api/users</p>
                    <p><strong>Parámetros:</strong> name, username, password, telefono_contacto, rol (todos requeridos)</p>
                    <p>Crea un nuevo usuario.</p>
                    
                    <!-- Actualizar usuario -->
                    <span class="badge bg-primary">Actualizar usuario</span>
                    <p><strong>PUT</strong> /api/users/{id}</p>
                    <p><strong>Parámetros:</strong> Campos opcionales para actualizar (name, telefono_contacto, etc.)</p>
                    <p>Modifica la información de un usuario.</p>
                    
                    <!-- Eliminar usuario -->
                    <span class="badge bg-danger">Eliminar usuario</span>
                    <p><strong>DELETE</strong> /api/users/{id}</p>
                    <p>Elimina un usuario (soft delete o hard delete según el diseño).</p>
                </div>
            </div>
        </div>

        <!-- Sección de Roles -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#roles">
                    3. Roles
                </button>
            </h2>
            <div id="roles" class="accordion-collapse collapse" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <!-- Obtener lista de roles -->
                    <span class="badge bg-info">Obtener lista de roles</span>
                    <p><strong>GET</strong> /api/roles</p>
                    <p>Devuelve todos los roles disponibles.</p>
                    
                    <!-- Obtener rol por ID -->
                    <span class="badge bg-warning">Obtener rol por ID</span>
                    <p><strong>GET</strong> /api/roles/{id}</p>
                    <p>Obtiene los detalles de un rol específico.</p>
                    
                    <!-- Crear un rol -->
                    <span class="badge bg-success">Crear un rol</span>
                    <p><strong>POST</strong> /api/roles</p>
                    <p><strong>Parámetros:</strong> name (string, requerido), permissions (array de strings, requerido)</p>
                    <p>Crea un nuevo rol.</p>
                </div>
            </div>
        </div>

        <!-- Sección de Categorías de Tickets -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#categories">
                    4. Categorías de Tickets
                </button>
            </h2>
            <div id="categories" class="accordion-collapse collapse" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <span class="badge bg-info">Obtener lista de categorías</span>
                    <p><strong>GET</strong> /api/categories</p>
                    <p>Devuelve todas las categorías de tickets.</p>

                    <span class="badge bg-warning">Obtener categoría por ID</span>
                    <p><strong>GET</strong> /api/categories/{id}</p>
                    <p>Obtiene los detalles de una categoría específica.</p>

                    <span class="badge bg-success">Crear una categoría</span>
                    <p><strong>POST</strong> /api/categories</p>
                    <p><strong>Parámetros:</strong> name (string, requerido)</p>
                    <p>Crea una nueva categoría de ticket.</p>
                </div>
            </div>
        </div>

        <!-- Sección de Tickets -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#tickets">
                    5. Tickets
                </button>
            </h2>
            <div id="tickets" class="accordion-collapse collapse" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <span class="badge bg-info">Obtener lista de tickets</span>
                    <p><strong>GET</strong> /api/tickets</p>
                    <p><strong>Parámetros opcionales:</strong> status, priority, id_category, id_cliente, id_asesor</p>
                    <p>Devuelve todos los tickets, con filtros opcionales.</p>

                    <span class="badge bg-warning">Obtener ticket por ID</span>
                    <p><strong>GET</strong> /api/tickets/{id}</p>
                    <p>Obtiene los detalles de un ticket específico.</p>

                    <span class="badge bg-success">Crear un ticket</span>
                    <p><strong>POST</strong> /api/tickets</p>
                    <p><strong>Parámetros:</strong> id_cliente, title, description, id_category, priority</p>
                    <p>Crea un nuevo ticket.</p>

                    <span class="badge bg-primary">Actualizar ticket</span>
                    <p><strong>PUT</strong> /api/tickets/{id}</p>
                    <p>Modifica los datos de un ticket.</p>

                    <span class="badge bg-danger">Eliminar ticket</span>
                    <p><strong>DELETE</strong> /api/tickets/{id}</p>
                    <p>Elimina un ticket (soft delete o hard delete según el diseño).</p>
                </div>
            </div>
        </div>

        <!-- Sección de Historial y Seguimiento de Tickets -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#history">
                    6. Historial y Seguimiento de Tickets
                </button>
            </h2>
            <div id="history" class="accordion-collapse collapse" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <span class="badge bg-info">Obtener historial de estados de un ticket</span>
                    <p><strong>GET</strong> /api/status_history/{ticket_id}</p>
                    <p>Muestra los cambios de estado de un ticket.</p>

                    <span class="badge bg-warning">Obtener interacciones de un ticket</span>
                    <p><strong>GET</strong> /api/interactions/{ticket_id}</p>
                    <p>Devuelve los comentarios y respuestas asociadas a un ticket.</p>

                    <span class="badge bg-success">Agregar interacción en un ticket</span>
                    <p><strong>POST</strong> /api/interactions</p>
                    <p><strong>Parámetros:</strong> id_ticket, id_user, message, type</p>
                    <p>Agrega una interacción a un ticket.</p>
                </div>
            </div>
        </div>

        <!-- Sección de Terminales y Asesores -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#terminals">
                    7. Terminales y Asesores
                </button>
            </h2>
            <div id="terminals" class="accordion-collapse collapse" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <span class="badge bg-info">Obtener lista de terminales</span>
                    <p><strong>GET</strong> /api/terminals</p>
                    <p>Devuelve todas las terminales registradas.</p>

                    <span class="badge bg-warning">Obtener terminal por ID</span>
                    <p><strong>GET</strong> /api/terminals/{id}</p>
                    <p>Obtiene los detalles de una terminal específica.</p>

                    <span class="badge bg-success">Asignar terminal a un asesor</span>
                    <p><strong>POST</strong> /api/asesor_terminals</p>
                    <p><strong>Parámetros:</strong> id_asesor, id_terminal</p>
                    <p>Asigna una terminal a un asesor.</p>
                </div>
            </div>
        </div>

        <!-- Sección de Logs -->
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#logs">
                    8. Logs
                </button>
            </h2>
            <div id="logs" class="accordion-collapse collapse" data-bs-parent="#apiDocs">
                <div class="accordion-body">
                    <span class="badge bg-info">Obtener lista de logs</span>
                    <p><strong>GET</strong> /api/logs</p>
                    <p><strong>Parámetros opcionales:</strong> id_user</p>
                    <p>Muestra todas las acciones registradas en el sistema.</p>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
